function initialize(){autocompleteCityOne=new google.maps.places.Autocomplete(document.getElementById("city1"),{types:["(cities)"]}),autocompleteCityTwo=new google.maps.places.Autocomplete(document.getElementById("city2"),{types:["(cities)"]}),google.maps.event.addListener(autocompleteCityOne,"place_changed",function(){}),google.maps.event.addListener(autocompleteCityTwo,"place_changed",function(){})}function initializeConversion(){document.getElementById("datenh1").value.length>0&&document.getElementById("datenh2").value.length>0&&(alert("Please choose date and time of one of the cities!"),location.reload()),0==document.getElementById("datenh1").value.length?setValueOfDateTwo():setValueOfDateOne(),getCoordinates(document.getElementById("city1").value),getCoordinates(document.getElementById("city2").value)}function setValueOfDateOne(){datenh1=document.getElementById("datenh1").value;var e=moment(datenh1,"h:mm a ddd DD MMM YYYY");date1=e.month()+1+"/"+e.date()+"/"+e.year()+" "+e.hour()+":"+e.minutes(),console.log("Date1:"+date1),document.getElementById("date1").value=date1,console.log("date1:"+document.getElementById("date1").value),document.getElementById("date2").value=""}function setValueOfDateTwo(){datenh2=document.getElementById("datenh2").value;var e=moment(datenh2,"h:mm a ddd DD MMM YYYY");date2=e.month()+1+"/"+e.date()+"/"+e.year()+" "+e.hour()+":"+e.minutes(),document.getElementById("date2").value=date2,console.log("date2:"+document.getElementById("date2").value),document.getElementById("date1").value=""}function getCoordinates(e){var t=e;geocoder=new google.maps.Geocoder,geocoder.geocode({address:t},function(e,t){t==google.maps.GeocoderStatus.OK?(console.log(e[0].geometry.location.A),console.log(e[0].geometry.location.F),longitude=e[0].geometry.location.A,latitude=e[0].geometry.location.F,generateRequestURL(latitude,longitude)):alert("Geocode was not successful for the following reason: "+t)})}function generateRequestURL(e,t){var o,n="AIzaSyB4bGs5nvF2cvmCrTm77fv_Mv0XiKqKORY";if(0!=document.getElementById("date1").value.length&&0!=document.getElementById("date2").value.length&&(flag=-1),0==document.getElementById("date1").value.length?0==document.getElementById("date2").value.length&&1==count1?(flag=-1,alert("Please choose date and time of one of the cities!"),location.reload()):(flag=1,statusOfCity[1]=1):(flag=0,statusOfCity[0]=1),console.log(flag),console.log("StatusOfCity 0 : "+statusOfCity[0]),console.log("StatusOfCity 1 : "+statusOfCity[1]),0==flag){var a=new Date(document.getElementById("date1").value);o=Math.round(a.getTime()/1e3),console.log("Date: "+document.getElementById("date1").value+"Timestamp: "+o);var l=t+","+e,d="https://maps.googleapis.com/maps/api/timezone/json?location="+l+"&timestamp="+o+"&key="+n;statusOfCity[count1]?url1=d:url2=d}if(1==flag){var a=new Date(document.getElementById("date2").value);o=Math.round(a.getTime()/1e3),console.log("Date: "+document.getElementById("date2").value+"Timestamp: "+o);var l=t+","+e,d="https://maps.googleapis.com/maps/api/timezone/json?location="+l+"&timestamp="+o+"&key="+n;statusOfCity[count1]?(console.log("URL 1 Selected"),url1=d):url2=d}1==count1&&(getConvertedTime(o,url1,url2,flag),count1=-1,flag=-1,statusOfCity[0]=0,statusOfCity[1]=0,document.getElementById("date1").value=0,document.getElementById("date2").value=0),count1++}function sendRequest(e){var t=new XMLHttpRequest;t.open("GET",e,!1),t.send(null);var o=t.responseText,n=JSON.parse(o);return n}function addZero(e){return 10>e&&(e="0"+e),e}function getConvertedTime(e,t,o,n){jsonObjOfEntered=sendRequest(t),jsonObjOfNonEntered=sendRequest(o),console.log("Entered City URL: "+t),console.log("Blank City URL: "+o);var a=jsonObjOfEntered.dstOffset+jsonObjOfEntered.rawOffset;console.log("City One Offset:"+a);var l=e+jsonObjOfNonEntered.dstOffset+jsonObjOfNonEntered.rawOffset-a,d=new Date(1e3*l);console.log("Time:"+d);var u="AM",s=d.getHours();s>=12&&(u="PM",s-=12);var m=s+":"+addZero(d.getMinutes())+" "+u+" "+weekNames[d.getDay()]+" "+addZero(d.getDate())+" "+monthNames[d.getMonth()]+" "+d.getFullYear();console.log("Flag: "+n),console.log("Full Converted Time: "+m),0==n?(document.getElementById("datenh2").value=m,display(jsonObjOfEntered,jsonObjOfNonEntered,a,n),a=0,n=-1):1==n&&(document.getElementById("datenh1").value=m,display(jsonObjOfEntered,jsonObjOfNonEntered,a,n),a=0,n=-1)}function display(e,t,o,n){var a=(t.dstOffset+t.rawOffset-o)/3600;console.log("diffInOffset"+a);var l=a%1,d="";if(console.log(l),0==l)var u=l;else if(l==-.5||.5==l){d="0";var u=.3}else if(l==-.25||.25==l)var u=.15;else if(l==-.75||.75==l)var u=.45;if(0>a)var s="-";a=Math.abs(a)-Math.abs(l)+u,0==n&&(document.getElementById("converted").innerHTML="-"==s?document.getElementById("city1").value+" is +"+Math.abs(a)+d+" of "+document.getElementById("city2").value:document.getElementById("city2").value+" is +"+Math.abs(a)+d+" of "+document.getElementById("city1").value),1==n&&(document.getElementById("converted").innerHTML="-"==s?document.getElementById("city2").value+" is +"+Math.abs(a)+d+" of "+document.getElementById("city1").value:document.getElementById("city1").value+" is +"+Math.abs(a)+d+" of "+document.getElementById("city2").value)}var geocoder,count=-1,count1=0,flag=-1,monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],autocompleteCityOne,autocompleteCityTwo,statusOfCity=[0,0];statusOfCity[0]=0,statusOfCity[1]=0;var count2=0,url1,url2;